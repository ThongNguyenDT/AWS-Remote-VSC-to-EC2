<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.132.0">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/images/favicon.png" type="image/png">

    <title>Kết nối VScode bằng EC2_Instances_Connect và AWS Systems Manager :: AWS System Manager</title>

    
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/nucleus.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/fontawesome-all.min.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/hybrid.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/featherlight.min.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/perfect-scrollbar.min.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/auto-complete.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/atom-one-dark-reasonable.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/theme.css?1723573434" rel="stylesheet">
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/hugo-theme.css?1723573434" rel="stylesheet">
    
    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/css/theme-workshop.css?1723573434" rel="stylesheet">
    
    

    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/jquery-3.3.1.min.js?1723573434"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/7-connect-vscode-using-ec2_instances_connect-and-aws-systems-manager/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/lunr.min.js?1723573434"></script>
<script type="text/javascript" src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/auto-complete.js?1723573434"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/levuxuanan.github.io\/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2\/\/vi";
    
</script>
<script type="text/javascript" src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/search.js?1723573434"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/1-connect-vscode-to-aws-ec2-using-ssh/" title="Kết nối VSCode với AWS EC2 bằng SSH" class="dd-item 
        
        
        
        ">
      <a href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/1-connect-vscode-to-aws-ec2-using-ssh/">
           <b> 1. </b> Kết nối VSCode với AWS EC2 bằng SSH
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/2-connect-vscode-to-aws-ec2-using-zerotier/" title="kết nối VSCode với AWS EC2 bằng Zerotier" class="dd-item 
        
        
        
        ">
      <a href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/2-connect-vscode-to-aws-ec2-using-zerotier/">
           <b> 2. </b> kết nối VSCode với AWS EC2 bằng Zerotier
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/3-hosting-vs-code-on-ec2-from-amazon-linux-2/" title="Hosting VS Code trên EC2 từ Amazon Linux 2" class="dd-item 
        
        
        
        ">
      <a href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/3-hosting-vs-code-on-ec2-from-amazon-linux-2/">
           <b> 3. </b> Hosting VS Code trên EC2 từ Amazon Linux 2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/4-manually-deploy-vs-code-on-ec2/" title="Triển khai thủ công VS Code trên EC2" class="dd-item 
        
        
        
        ">
      <a href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/4-manually-deploy-vs-code-on-ec2/">
           <b> 4. </b> Triển khai thủ công VS Code trên EC2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/5-extended-create-an-ami-from-an-instance-and-run-an-instance-from-that-ami/" title="Tạo AMI từ instance và chạy instance từ AMI đó" class="dd-item 
        
        
        
        ">
      <a href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/5-extended-create-an-ami-from-an-instance-and-run-an-instance-from-that-ami/">
           <b> 5. </b> Tạo AMI từ instance và chạy instance từ AMI đó
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/6-generate-vscode-from-ami-build-from-ec2-image-builder/" title="Tạo VSCode từ bản dựng AMI từ EC2 Image Builder" class="dd-item 
        
        
        
        ">
      <a href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/6-generate-vscode-from-ami-build-from-ec2-image-builder/">
           <b> 6. </b> Tạo VSCode từ bản dựng AMI từ EC2 Image Builder
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/7-connect-vscode-using-ec2_instances_connect-and-aws-systems-manager/" title="Kết nối VScode bằng EC2_Instances_Connect và AWS Systems Manager" class="dd-item 
        
        active
        
        ">
      <a href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/7-connect-vscode-using-ec2_instances_connect-and-aws-systems-manager/">
           <b> 7. </b> Kết nối VScode bằng EC2_Instances_Connect và AWS Systems Manager
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://levuxuanan.github.io/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/7-connect-vscode-using-ec2_instances_connect-and-aws-systems-manager/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="https://levuxuanan.github.io/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/7-connect-vscode-using-ec2_instances_connect-and-aws-systems-manager/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
    <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0"
        title="Migrate" Alt="web counter" border="0" /></a> <br>
    <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0"
        title="Total Cloud Journey" Alt="web counter" border="0" />

</left>
<left>
    <br>
    <br>
    <b> Last Updated </b> <br>
    <i>
        <font color=orange>11-08-2024</font>
    </i>
</left>
<left>
    <br>
    <br>
    <b> Author</b> <br>

    <i> <a href="#" style="color:orange">Tien Thong</a> <br>
        <a href="https://www.linkedin.com/in/levuxuanan/" style="color:orange">Xuan An</a> <br>
        <a href="https://www.linkedin.com/in/anh-p-47063a13a/" style="color:orange">Hai An</a> <br>
    </i>
</left>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/'>REMOTE DEVELOPMENT WITH VS VSCODE AND EC2</a> > Kết nối VScode bằng EC2_Instances_Connect và AWS Systems Manager
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#ec2_instances_connect">EC2_Instances_Connect</a></li>
    <li><a href="#aws-systems-manager">AWS Systems Manager</a>
      <ul>
        <li><a href="#bước-1-setup-các-endpoint-cần-thiết">Bước 1 Setup các endpoint cần thiết</a></li>
        <li><a href="#bước-2-cấu-hình-ec2">Bước 2: Cấu hình EC2</a></li>
        <li><a href="#bước-3-thử-kết-nối">Bước 3: Thử kết nối</a></li>
        <li><a href="#ec2_instances_connect-1">EC2_Instances_Connect</a></li>
        <li><a href="#aws-systems-manager-1">AWS Systems Manager</a></li>
        <li><a href="#bước-4-kết-nối-bằng-cli">Bước 4: kết nối bằng CLI</a></li>
        <li><a href="#ec2_instances_connect-2">EC2_Instances_Connect</a></li>
        <li><a href="#aws-systems-manager-2">AWS Systems Manager</a></li>
        <li><a href="#bước-5-cấu-hình-vscode">Bước 5: Cấu hình VSCode</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Kết nối VScode bằng EC2_Instances_Connect và AWS Systems Manager
            </h1>
          

        



	<p>Trong phần này chúng ta sẽ thực hiện kết  nối vscode remote ssh với EC2  nằm trong private subnet</p>
<p>thông qua hai phương pháp khác nhau:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h2 id="ec2_instances_connect">EC2_Instances_Connect</h2>
<h2 id="aws-systems-manager">AWS Systems Manager</h2>
<h3 id="bước-1-setup-các-endpoint-cần-thiết">Bước 1 Setup các endpoint cần thiết</h3>
<p>để kết nối ssh với ec2 nằm trong private connect ta cần phải kết nối thông qua một thiết bị trung gian: có thể là bastion host, hoặc các endpoint</p>
<p>Dùng <strong>EC2 Instance Connect Endpoint</strong></p>
<p>Tương tự như các thiết lập endpoint ở bài trên ta cần tạo endpoint như sau</p>
<p><img alt="Untitled" src="/images/part7/7.step1-l-1.png"></p>
<p>Dùng <strong>bộ 3 ssm endpoint connect</strong></p>
<p>Tương tự như các thiết lập endpoint ở bài trên ta cần tạo endpoint như sau</p>
<p><img alt="Untitled" src="/images/part7/7.step1-r-1.png"></p>
<p><img alt="Untitled" src="/images/part7/7.step1-r-2.png"></p>
<p><img alt="Untitled" src="/images/part7/7.step1-r-3.png"></p>
<p>Lưu ý trong phần thiết lập:</p>
<ul>
<li>Chúng ta cần trỏ đúng đến VPC, subnet của EC2 cần kết nối</li>
<li>Cần mở security group để EC2 và endpoint có thể kết nối được với nhau</li>
</ul>
<p>Lưu ý:</p>
<ul>
<li>Chúng ta cần trỏ đúng đến VPC, subnet của EC2 cần kết nối</li>
<li>Cần mở security group để EC2 và endpoint có thể kết nối được với nhau</li>
<li>Cần phải tạo 3 endpoint bao gồm:
<ul>
<li>com.amazonaws.us-east-1.ssm</li>
<li>com.amazonaws.us-east-1.ssmmessages</li>
<li>com.amazonaws.us-east-1.ec2messages</li>
</ul>
</li>
</ul>
<p><strong>EC2 Instance Connect</strong> cho phép chúng ta tạo trực tiếp VPC <strong>endpoint</strong> trong phần <strong>kết nối</strong> của ec2.</p>
<p>EC2 Instance Connect không yêu cầu thiết lập thêm các plugin phụ</p>
<p>EC2 Instance Connect không yêu cầu cấp quyền truy cập để kết nối ec2 vs dịch vụ quản lý vì bản chất nó là kết nối trực tiếp nên không cần dịch vụ quản lý</p>
<p>Chỉ có thể kết nối đến 1 EC2, Thiết lập riêng từng máy</p>
<p>Cấu hình dễ dàng hơn.</p>
<p>Bản phải thiết lập các endpoint này trong phần VPC Endpoint</p>
<p>Phải thiết lập plugin cho AWS CLI trên thiết bị nguồn</p>
<p>Phải có SSM agent trên EC2, lưu ý:</p>
<ul>
<li>Một số <strong>AMI</strong> mặt định đã có cấu hình agent</li>
<li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/ami-preinstalled-agent.html">Bạn có thể tham khảo thêm ở đây</a></li>
</ul>
<p>Bản chất SSM là một dịch vụ quản lý nên, bạn <strong>cần cấp quyền</strong> cho phép EC2 Tương tác với dịch vụ này. Bạn có thể tham khảo <a href="https://www.notion.so/REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2-aec58040853d4f229f7e1d1f930b417f?pvs=21">các bước cấp quyền</a>, <a href="https://www.notion.so/REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2-aec58040853d4f229f7e1d1f930b417f?pvs=21">chi tiết quyền</a></p>
<p>Cho phép bạn cấu hình cùng lúc nhiều thiết bị, đây là nội dung của dịch vụ <a href="https://us-east-1.console.aws.amazon.com/systems-manager/home"><strong>AWS Systems Manager</strong></a></p>
<hr>
<p>Cả 2 phương pháp này đều không yêu cầu:</p>
<ul>
<li>Thiết lập các port ssh cho quá trình kết nối</li>
<li>Public EC2 bạn ra internet</li>
<li>Cài đặt các gói user data của VScode</li>
</ul>
<hr>
<h3 id="bước-2-cấu-hình-ec2">Bước 2: Cấu hình EC2</h3>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Tạo kết nối <strong>EC2 Instance Connect</strong> trực tiếp trong tab <strong>connect</strong> của ec2</p>
<p><img alt="Untitled" src="/images/part7/7.step2.png"></p>
<h3 id="bước-3-thử-kết-nối">Bước 3: Thử kết nối</h3>
<h3 id="ec2_instances_connect-1">EC2_Instances_Connect</h3>
<p><img alt="Untitled" src="/images/part7/7.step3-l-1.png"></p>
<p>Nếu bạn nhìn thấy 3 cảnh báo trên và không thể kết nối được với ec2 của mình trong tab EC2 Instance Connect chứng tỏ các thiết lập về VPC, subnet của bạn hiện tại đang đi đúng hướng.</p>
<p>Chọn theo hình</p>
<p><img alt="Untitled" src="/images/part7/7.step3-l-2.png"></p>
<p>nếu bạn nhận được kết quả nút kết nối màu vàng các thiết lập về sg và endpoint của bạn đã chính xác</p>
<p><img alt="Untitled" src="/images/part7/7.step3-l-3.png"></p>
<p>nếu không được đọc các bước khắc phục ở bên</p>
<ul>
<li>Chọn Connect</li>
</ul>
<p><img alt="Untitled" src="/images/part7/7.step3-l-4.png"></p>
<h3 id="aws-systems-manager-1">AWS Systems Manager</h3>
<p><img alt="Untitled" src="/images/part7/7.step3-r-1.png"></p>
<p>Tại tab Session Manager nếu bạn nhìn thấy nút kết nối có màu vàng như trong hình có nghĩa là bạn đã thiết lập thành công kết nối của mình</p>
<p>Nếu không được bạn có thể kiểm tra các thiết lập sau:</p>
<ul>
<li>
<p>Security group của bạn có thiết lập đúng không, recommend nếu không chắc chắn bạn nên thiết lập sg default cho cho cả endpoint và EC2 của mình</p>
</li>
<li>
<p>Kiểm tra các endpoint và các subnet của mình có trỏ đúng đến cùng một subnet private không. Lưu ý rằng việc chọn subnet cho endpoint ở phần một là thiết lập target để endpoint kết nối đến chứ không phải là vị trí đặt endpoint.</p>
</li>
<li>
<p>Không cần thiết lập endpoint cho public subnet</p>
</li>
<li>
<p>Kiểm tra xem AMI của bạn có hổ trợ Agent ssm hay không. Nếu có thực hiện  reboot lại instance, nếu không có thể xóa đi, và tạo lại hoặc tiến hành kết nối EC2_Instances_Connect và cài đặt agent</p>
</li>
<li>
<p>Chọn Connect</p>
</li>
</ul>
<p><img alt="Untitled" src="/images/part7/7.step3-r-2.png"></p>
<h3 id="bước-4-kết-nối-bằng-cli">Bước 4: kết nối bằng CLI</h3>
<p>Các bước tiếp theo yêu cầu mấy phải được thiết lập AWS CLI v2</p>
<p>Nếu chưa có bạn có thể tham khảo <a href="https://www.notion.so/REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2-aec58040853d4f229f7e1d1f930b417f?pvs=21">ở đây</a></p>
<h3 id="ec2_instances_connect-2">EC2_Instances_Connect</h3>
<p>Không yêu cầu cái gói cài đặt khác</p>
<h3 id="aws-systems-manager-2">AWS Systems Manager</h3>
<p>yêu cầu phải có plugin để thực hiện kết nối session trên cli, nếu chưa <a href="https://www.notion.so/REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2-aec58040853d4f229f7e1d1f930b417f?pvs=21">có thể tham khảo tại đây</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>aws ec2-instance-connect ssh  --instance-id &lt;instance_id&gt;
</span></span></code></pre></div><p><img alt="Untitled" src="/images/part7/7.step4-l-1.png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>aws ssm start-session --target &lt;instance_id&gt;
</span></span></code></pre></div><p><img alt="Untitled" src="/images/part7/7.step4-r-1.png"></p>
<h3 id="bước-5-cấu-hình-vscode">Bước 5: Cấu hình VSCode</h3>
<p>Như vậy ta đã thành công kết nối ec2 thông qua cli, bây giờ ta cần  thiết lập chúng kết nối thông qua vscode</p>
<p><a href="https://www.notion.so/REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2-aec58040853d4f229f7e1d1f930b417f?pvs=21">Ta thực hiện các bước tương tự như kết nối với EC2 ở public subnet</a></p>
<p>Tại bước edit host ta sẽ thực hiện việc tạo các tunnel để ssh thay vì dùng public ip</p>
<p>Công việc rất đơn giản, chỉ việc cấu hình file host của bạn như sau</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/6-generate-vscode-from-ami-build-from-ec2-image-builder/" title="Tạo VSCode từ bản dựng AMI từ EC2 Image Builder"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/vi/1-connect-vscode-to-aws-ec2-using-ssh/" title="Kết nối VSCode với AWS EC2 bằng SSH" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/clipboard.min.js?1723573434"></script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/perfect-scrollbar.min.js?1723573434"></script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/perfect-scrollbar.jquery.min.js?1723573434"></script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/jquery.sticky.js?1723573434"></script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/featherlight.min.js?1723573434"></script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/highlight.pack.js?1723573434"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/modernizr.custom-3.6.0.js?1723573434"></script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/learn.js?1723573434"></script>
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/js/hugo-learn.js?1723573434"></script>

    <link href="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/mermaid/mermaid.css?1723573434" rel="stylesheet" />
    <script src="/levuxuanan.github.io-REMOTE-DEVELOPMENT-WITH-VS-VSCODE-AND-EC2/mermaid/mermaid.js?1723573434"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');
  function updateImageSources() {
    
    var images = document.querySelectorAll("img");
    
    
    images.forEach(function(image) {
      const fullSrc = image.src;

      
      const url = new URL(fullSrc);
      
        image.src = baseurl.concat(url.pathname);
    });
  }
  updateImageSources()
</script>
  </body>
</html>
